<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instruction Analysis Utilities - Turing Tooling</title>
    <style>
        @font-face {
            font-family: 'MozillaHeadline-VariableFont_wdth,wght';
            src: url("fonts/MozillaHeadline-VariableFont_wdth,wght.ttf") format('truetype')
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'MozillaHeadline-VariableFont_wdth,wght', sans-serif;
        }

        h1, h2 {
            color: #667eea !important;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: black;
            min-height: 100vh;
            color: white;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .task-tracker-section {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .tracker-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            padding: 2rem 0;
        }

        .header-visual {
            position: relative;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .instruction-icon {
            animation: pulse 4s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(102, 126, 234, 0.3));
        }

        .subtitle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1rem 0 1.5rem 0;
            gap: 1rem;
        }

        .subtitle-line {
            height: 1px;
            width: 60px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
        }

        .subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 300;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .tracker-header h1 {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tracker-description {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
        }

        .analytics-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .analytics-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 24px;
            padding: 2.5rem 2rem;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            height: 320px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .analytics-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.8s ease;
        }

        .analytics-card:hover::before {
            left: 100%;
        }

        .analytics-card:hover {
            transform: translateY(-10px);
            border-color: rgba(102, 126, 234, 0.4);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.2),
                0 10px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .utility-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all 0.3s ease;
        }

        .utility-title {
            font-size: 1.4rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .utility-description {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.4;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        #content {
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            display: none;
        }

        #content-header {
            font-size: 2.5rem;
            color: #667eea;
            margin: 0 0 2rem 0;
            text-align: center;
        }

        .content-subheader {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin: 1.5rem 0 0.5rem 0;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(102, 126, 234, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
            font-size: medium;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.6);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .button-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            gap: 1rem;
        }

        .action-button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
            background: linear-gradient(135deg, #764ba2, #667eea);
        }

        .output-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(102, 126, 234, 0.2);
        }

        .output-header {
            font-size: 1.8rem;
            color: #667eea;
            margin-bottom: 1rem;
            text-align: center;
        }

        @media (max-width: 768px) {
            .task-tracker-section {
                padding: 0 1rem;
            }

            .tracker-header h1 {
                font-size: 2.2rem;
            }

            .tracker-description {
                font-size: 1rem;
            }

            .analytics-container {
                grid-template-columns: 1fr;
            }

            .utility-icon {
                font-size: 3rem;
            }

            .utility-title {
                font-size: 1.2rem;
            }

            .button-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="dashboard-header">
        <div class="logo">
            <svg width="100" height="40" viewBox="0 0 100 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <text x="50" y="25" text-anchor="middle" fill="#667eea" font-size="24" font-weight="bold">TURING</text>
            </svg>
        </div>
    </header>

    <section class="task-tracker-section">
        <div class="tracker-header">
            <div class="header-visual">
                <div class="instruction-icon">
                    <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="instructionGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        <!-- Instruction document -->
                        <rect x="25" y="20" width="70" height="80" rx="8" fill="url(#instructionGradient)" opacity="0.8" filter="url(#glow)"/>
                        <rect x="30" y="30" width="60" height="3" rx="1.5" fill="white" opacity="0.7"/>
                        <rect x="30" y="38" width="45" height="3" rx="1.5" fill="white" opacity="0.5"/>
                        <rect x="30" y="46" width="55" height="3" rx="1.5" fill="white" opacity="0.6"/>
                        <rect x="30" y="54" width="40" height="3" rx="1.5" fill="white" opacity="0.4"/>
                        
                        <!-- Analysis arrows -->
                        <path d="M100 35 L110 40 L100 45 Z" fill="url(#instructionGradient)" opacity="0.9"/>
                        <line x1="95" y1="40" x2="100" y2="40" stroke="url(#instructionGradient)" stroke-width="2"/>
                        
                        <path d="M100 75 L110 80 L100 85 Z" fill="url(#instructionGradient)" opacity="0.9"/>
                        <line x1="95" y1="80" x2="100" y2="80" stroke="url(#instructionGradient)" stroke-width="2"/>
                    </svg>
                </div>
            </div>
            <h1>Instruction Analysis Hub</h1>
            <div class="subtitle-container">
                <div class="subtitle-line"></div>
                <span class="subtitle">Smart Analysis Tools</span>
                <div class="subtitle-line"></div>
            </div>
            <p class="tracker-description">
                Extract and analyze relevant APIs and policy components based on specific instructions. 
                Streamline your workflow by identifying exactly what you need from your existing resources.
            </p>
        </div>

        <div class="analytics-container">
            <div class="analytics-card" data-utility="extract-apis">
                <div class="utility-icon">🔍</div>
                <div class="utility-title">Extract Relevant APIs</div>
                <div class="utility-description">Analyze your instruction and automatically identify which APIs from your collection are relevant and necessary for implementation</div>
            </div>
            <div class="analytics-card" data-utility="extract-policy">
                <div class="utility-icon">📋</div>
                <div class="utility-title">Extract Policy Components</div>
                <div class="utility-description">Identify and extract the specific parts of your policy that will be triggered or affected by the given instruction</div>
            </div>
        </div>

        <div id="content"></div>
    </section>

    <script>
        // Mock API data - replace with actual backend calls
        const mockData = {
            extract_apis: {
                instruction_prompt: "Please provide the instruction you want to analyze for API extraction...",
                available_apis: `// Example APIs
GET /api/users - Retrieve user list
POST /api/users - Create new user
PUT /api/users/{id} - Update user
DELETE /api/users/{id} - Delete user
GET /api/products - Get product catalog
POST /api/orders - Create order
GET /api/analytics - Get analytics data`,
                analysis_context: "Provide any additional context about your system or specific requirements..."
            },
            extract_policy: {
                instruction_prompt: "Please provide the instruction you want to analyze for policy extraction...",
                policy_document: `// Example Policy Document
1. User Management Policy:
   - Only administrators can delete users
   - Users can only modify their own profiles
   - Email verification required for new accounts

2. Data Access Policy:
   - Personal data requires user consent
   - Analytics data anonymized after 30 days
   - Admin access logged and monitored

3. Order Processing Policy:
   - Payment verification required
   - Inventory check before confirmation
   - Automatic refund for failed deliveries`,
                analysis_context: "Provide any additional context about your policy structure or specific concerns..."
            }
        };

        async function extractApisHandling() {
            const data = mockData.extract_apis;
            
            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Extract Relevant APIs</h2>
                
                <h3 class="content-subheader">Instruction to Analyze</h3>
                <textarea id="instruction-input" placeholder="${data.instruction_prompt}"></textarea>

                <h3 class="content-subheader">Available APIs</h3>
                <textarea id="available-apis" placeholder="${data.available_apis}"></textarea>

                <h3 class="content-subheader">Analysis Context (Optional)</h3>
                <textarea id="analysis-context" placeholder="${data.analysis_context}" style="height: 100px;"></textarea>

                <div class="button-container">
                    <button class="action-button" onclick="analyzeApis()">Analyze & Extract APIs</button>
                    <button class="action-button" onclick="clearForm()">Clear Form</button>
                </div>
            `;
        }

        async function extractPolicyHandling() {
            const data = mockData.extract_policy;
            
            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Extract Policy Components</h2>
                
                <h3 class="content-subheader">Instruction to Analyze</h3>
                <textarea id="instruction-input" placeholder="${data.instruction_prompt}"></textarea>

                <h3 class="content-subheader">Policy Document</h3>
                <textarea id="policy-document" placeholder="${data.policy_document}"></textarea>

                <h3 class="content-subheader">Analysis Context (Optional)</h3>
                <textarea id="analysis-context" placeholder="${data.analysis_context}" style="height: 100px;"></textarea>

                <div class="button-container">
                    <button class="action-button" onclick="analyzePolicyComponents()">Analyze & Extract Policy</button>
                    <button class="action-button" onclick="clearForm()">Clear Form</button>
                </div>
            `;
        }

        function analyzeApis() {
            const instruction = document.getElementById('instruction-input').value;
            const apis = document.getElementById('available-apis').value;
            const context = document.getElementById('analysis-context').value;

            if (!instruction.trim() || !apis.trim()) {
                alert('Please provide both an instruction and available APIs to analyze.');
                return;
            }

            // Mock analysis result
            const analysisResult = `Based on your instruction: "${instruction.substring(0, 50)}..."

RELEVANT APIs IDENTIFIED:
✓ GET /api/users - Required for user data retrieval
✓ POST /api/users - Needed for user creation
✓ PUT /api/users/{id} - Essential for user updates

ANALYSIS DETAILS:
- Found 3 relevant APIs out of ${apis.split('\n').length} total APIs
- Primary operations: User management, data retrieval
- Security considerations: Authentication required
- Dependencies: User validation, database access

IMPLEMENTATION NOTES:
- Ensure proper error handling for each API call
- Consider rate limiting for bulk operations
- Validate user permissions before execution`;

            displayResults('API Analysis Results', analysisResult);
        }

        function analyzePolicyComponents() {
            const instruction = document.getElementById('instruction-input').value;
            const policy = document.getElementById('policy-document').value;
            const context = document.getElementById('analysis-context').value;

            if (!instruction.trim() || !policy.trim()) {
                alert('Please provide both an instruction and policy document to analyze.');
                return;
            }

            // Mock analysis result
            const analysisResult = `Based on your instruction: "${instruction.substring(0, 50)}..."

TRIGGERED POLICY COMPONENTS:
✓ User Management Policy - Section 1.2: User profile modifications
✓ Data Access Policy - Section 2.1: Personal data consent requirements

DETAILED POLICY EXTRACTION:
1. APPLICABLE RULES:
   - Users can only modify their own profiles
   - Personal data requires user consent
   - Admin access logged and monitored

2. COMPLIANCE REQUIREMENTS:
   - Verify user identity before allowing modifications
   - Obtain explicit consent for data changes
   - Log all administrative actions

3. RISK FACTORS:
   - Unauthorized access attempts
   - Data privacy violations
   - Audit trail integrity

RECOMMENDATIONS:
- Implement additional verification steps
- Enhanced logging for sensitive operations
- Regular policy compliance reviews`;

            displayResults('Policy Analysis Results', analysisResult);
        }

        function displayResults(title, content) {
            // Remove existing output if present
            const existingOutput = document.querySelector('.output-section');
            if (existingOutput) {
                existingOutput.remove();
            }

            const outputSection = document.createElement('div');
            outputSection.className = 'output-section';
            outputSection.innerHTML = `
                <h3 class="output-header">${title}</h3>
                <textarea style="height: 300px; font-family: 'Courier New', monospace;" readonly>${content}</textarea>
                <div class="button-container">
                    <button class="action-button" onclick="copyResults()">Copy Results</button>
                    <button class="action-button" onclick="exportResults()">Export Results</button>
                </div>
            `;

            document.getElementById('content').appendChild(outputSection);
            outputSection.scrollIntoView({ behavior: 'smooth' });
        }

        function clearForm() {
            const textareas = document.querySelectorAll('#content textarea');
            textareas.forEach(textarea => {
                if (!textarea.readOnly) {
                    textarea.value = '';
                }
            });

            // Remove results section
            const existingOutput = document.querySelector('.output-section');
            if (existingOutput) {
                existingOutput.remove();
            }
        }

        function copyResults() {
            const resultTextarea = document.querySelector('.output-section textarea');
            if (resultTextarea) {
                resultTextarea.select();
                document.execCommand('copy');
                
                // Visual feedback
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }
        }

        function exportResults() {
            const resultTextarea = document.querySelector('.output-section textarea');
            if (resultTextarea) {
                const content = resultTextarea.value;
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'analysis-results.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.analytics-card');
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    const utility = this.dataset.utility;
                    if (utility === 'extract-apis') {
                        extractApisHandling();
                    } else if (utility === 'extract-policy') {
                        extractPolicyHandling();
                    }
                });
            });
        });
    </script>
</body>
</html>