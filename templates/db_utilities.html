<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <title>Database Creation Utilities - Turing Tooling</title>
    <style>
        @font-face {
            font-family: 'MozillaHeadline-VariableFont_wdth,wght';
            src: url("{{ url_for('static', filename='fonts/MozillaHeadline-VariableFont_wdth,wght.ttf') }}") format('truetype')
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'MozillaHeadline-VariableFont_wdth,wght', sans-serif;
        }

        h1, h2 {
            color: #667eea !important;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: black;
            min-height: 100vh;
            color: white;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .task-tracker-section {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .tracker-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            padding: 2rem 0;
        }

        .header-visual {
            position: relative;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .database-icon {
            animation: float 6s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(102, 126, 234, 0.3));
        }

        .subtitle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1rem 0 1.5rem 0;
            gap: 1rem;
        }

        .subtitle-line {
            height: 1px;
            width: 60px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
        }

        .subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 300;
            letter-spacing: 2px;
            text-transform: uppercase;
        }


        .highlight-tag {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .highlight-tag:hover {
            transform: translateY(-2px);
            background: rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.5);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes orbit {
            0% { transform: rotate(0deg) translateX(50px) rotate(0deg); }
            100% { transform: rotate(360deg) translateX(50px) rotate(-360deg); }
        }

        .tracker-header h1 {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tracker-description {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
        }

        .analytics-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .analytics-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 24px;
            padding: 2.5rem 2rem;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            height: 320px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .analytics-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.8s ease;
        }

        .analytics-card:hover::before {
            left: 100%;
        }

        .analytics-card:hover {
            transform: translateY(-10px);
            border-color: rgba(102, 126, 234, 0.4);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 
                0 20px 40px rgba(102, 126, 234, 0.2),
                0 10px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .utility-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            // background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            // -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all 0.3s ease;
        }

        .utility-title {
            font-size: 1.4rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .utility-description {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.4;
        }

        a{
            text-decoration: none;
            color: inherit;
        }

        #content{
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            display: none;
        }

        #content-header {
            font-size: 2.5rem;
            color: #667eea;
            margin: 2rem 0;
            text-align: center;
        }

        .content-subheader {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin: 1rem;
            text-align: center;
        }

        textarea {
            width: 100%;
            height: 300px;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            // background: rgba(255, 255, 255, 0.05);
            // color: rgba(255, 255, 255, 0.9);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: none;
            font-size: medium;
        }

        @media (max-width: 768px) {
            .task-tracker-section {
                padding: 0 1rem;
            }

            .tracker-header h1 {
                font-size: 2.2rem;
            }

            .tracker-description {
                font-size: 1rem;
            }

            .analytics-container {
                grid-template-columns: 1fr;
            }

            .utility-icon {
                font-size: 3rem;
            }

            .utility-title {
                font-size: 1.2rem;
            }
        }
    </style>
    <script>
        async function extract_policy_apis_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'extract_policy_apis'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Extract Policy APIs</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Policy</h3>
                <textarea id="policy"></textarea>

                <h3 class="content-subheader">Example APIs</h3>
                <textarea id="example-apis"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="extract-apis" onclick="sendContentLLM('extract_policy_apis')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Extract Policy APIs</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt || '';
            document.getElementById('policy').value = data.policy || '';
            document.getElementById('example-apis').value = data.example_apis || '';
        }

        async function extract_policy_schema_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'extract_policy_schema'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Extract Policy Schema</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Policy</h3>
                <textarea id="policy"></textarea>

                <h3 class="content-subheader">Example Schema</h3>
                <textarea id="example-schema"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="extract-schema" onclick="sendContentLLM('extract_policy_schema')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Extract Policy Schema</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt || '';
            document.getElementById('policy').value = data.policy || '';
            document.getElementById('example-schema').value = data.example_schema || '';
        }

        function sendContentLLM(feature){
            if (feature == "policy_creation"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const dbSchema = document.getElementById('db-schema').value;
                const examplePolicies = document.getElementById('example-policies').value;
                const interfaceApis = document.getElementById('interface-apis').value;
    
                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'generate_policy_prompt',
                        initial_prompt: initialPrompt,
                        db_schema: dbSchema,
                        example_policies: examplePolicies,
                        interface_apis: interfaceApis
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-policy');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }
    
                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Generated Policy Prompt';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);
    
                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-policy';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while generating the policy.');
                });

            } else if (feature == "api_implementation"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const dbSchema = document.getElementById('db-schema').value;
                const exampleApis = document.getElementById('example-apis').value;
                const interfaceApis = document.getElementById('interface-apis').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'generate_api_prompt',
                        initial_prompt: initialPrompt,
                        db_schema: dbSchema,
                        example_apis: exampleApis,
                        interface_apis: interfaceApis
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-api');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Generated API Prompt';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-api';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while generating the API.');
                });
            } else if (feature == "database_seeding"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const dbSchema = document.getElementById('db-schema').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'generate_seed_prompt',
                        initial_prompt: initialPrompt,
                        db_schema: dbSchema
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-seed');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Generated Seed Prompt';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-seed';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while generating the seed.');
                });
            } else if (feature == "scenario_realism"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const dbSchema = document.getElementById('db-schema').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'check_scenario_realism',
                        initial_prompt: initialPrompt,
                        db_schema: dbSchema,
                        scenario: document.getElementById('scenario').value
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-scenario');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Generated Scenario Prompt';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-scenario';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.realism_check;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while generating the scenario.');
                });
            } else if (feature == "extract_policy_apis"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const policy = document.getElementById('policy').value;
                const exampleApis = document.getElementById('example-apis').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'extract_policy_apis',
                        initial_prompt: initialPrompt,
                        policy: policy,
                        example_apis: exampleApis
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-apis');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Extracted Policy APIs';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-prompt';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while extracting policy APIs.');
                });
            } else if (feature == "extract_policy_schema"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const policy = document.getElementById('policy').value;
                const exampleSchema = document.getElementById('example-schema').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'extract_policy_schema',
                        initial_prompt: initialPrompt,
                        policy: policy,
                        example_schema: exampleSchema
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-schema');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Extracted Policy Schema';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-prompt';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while extracting policy schema.');
                });
            } else if (feature == "tune_policy"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const policy = document.getElementById('policy').value;
                const examplePolicies = document.getElementById('example-policies').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'tune_policy',
                        initial_prompt: initialPrompt,
                        policy: policy,
                        example_policies: examplePolicies
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-tuned-policy');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Tuned Policy';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-tuned-policy';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while tuning the policy.');
                });
            } else if (feature == "policy_validator"){
                const initialPrompt = document.getElementById('initial-prompt').value;
                const policy = document.getElementById('policy').value;
                const examplePolicies = document.getElementById('example-policies').value;

                fetch('/database_utilities_prompt_generation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        action: 'validate_policy',
                        initial_prompt: initialPrompt,
                        policy: policy,
                        example_policies: examplePolicies
                    })
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    // remove if they were present before
                    const existingHeader = document.getElementById('output-header');
                    const existingTextArea = document.getElementById('generated-validation');
                    if (existingHeader) {
                        existingHeader.remove();
                    }
                    if (existingTextArea) {
                        existingTextArea.remove();
                    }

                    outputHeader = document.createElement('h2');
                    outputHeader.innerText = 'Policy Validation Results';
                    outputHeader.id = 'output-header';
                    document.getElementById('content').appendChild(outputHeader);

                    textAreaNode = document.createElement('textarea');
                    textAreaNode.id = 'generated-validation';
                    textAreaNode.style.width = '100%';
                    textAreaNode.style.height = '200px';
                    textAreaNode.value = data.prompt;
                    document.getElementById('content').appendChild(textAreaNode);
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while validating the policy.');
                });
            } else {
                alert("This feature is not implemented yet.");
            }
        }

        async function policy_creation_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'policy_creation'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Policy Creation</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Database schema</h3>
                <textarea id="db-schema"></textarea>

                <h3 class="content-subheader">Example policies</h3>
                <textarea id="example-policies"></textarea>

                <h3 class="content-subheader">Interface APIs</h3>
                <textarea id="interface-apis"></textarea>
                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="generate-policy" onclick="sendContentLLM('policy_creation')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Generate Policy Prompt</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt;
            // document.getElementById('db-schema').value = data.db_schema;
            document.getElementById('example-policies').value = data.example_policies;
        }

        async function database_seeding_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'database_seeding'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Database Seeding</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Database schema</h3>
                <textarea id="db-schema"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="generate-seed" onclick="sendContentLLM('database_seeding')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Generate Seed Prompt</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt;
            // document.getElementById('db-schema').value = data.db_schema;
            // document.getElementById('example-data').value = data.example_data;
        }

        async function scenario_realism_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'scenario_realism'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Scenario Realism</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Database schema</h3>
                <textarea id="db-schema"></textarea>

                <h3 class="content-subheader">Scenario</h3>
                <textarea id="scenario"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="generate-scenario" onclick="sendContentLLM('scenario_realism')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Generate Scenario Prompt</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt;
            // document.getElementById('db-schema').value = data.db_schema;
        }

        async function api_implementation_handling(){

            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'api_implementation'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">API Implementation</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Database schema</h3>
                <textarea id="db-schema"></textarea>

                <h3 class="content-subheader">Example APIs</h3>
                <textarea id="example-apis"></textarea>

                <h3 class="content-subheader">Interface APIs</h3>
                <textarea id="interface-apis"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="generate-api" onclick="sendContentLLM('api_implementation')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Generate API Prompt</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt;
            // document.getElementById('db-schema').value = data.db_schema;
            document.getElementById('example-apis').value = data.example_apis;

        }

                
        async function extract_policy_apis_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'extract_policy_apis'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Extract Policy APIs</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Policy</h3>
                <textarea id="policy"></textarea>

                <h3 class="content-subheader">Example APIs</h3>
                <textarea id="example-apis"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="extract-apis" onclick="sendContentLLM('extract_policy_apis')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Extract Policy APIs</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt || '';
            document.getElementById('policy').value = data.policy || '';
            document.getElementById('example-apis').value = data.example_apis || '';
        }

        async function tune_policy_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'tune_policy'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Tune Policy</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Policy</h3>
                <textarea id="policy"></textarea>

                <h3 class="content-subheader">Example Policies</h3>
                <textarea id="example-policies"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="tune-policy" onclick="sendContentLLM('tune_policy')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Tune Policy</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt || '';
            document.getElementById('policy').value = data.policy || '';
            document.getElementById('example-policies').value = data.example_policies || '';
        }

        async function policy_validator_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'policy_validator'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Policy Validator</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Policy</h3>
                <textarea id="policy"></textarea>

                <h3 class="content-subheader">Example Policies</h3>
                <textarea id="example-policies"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="validate-policy" onclick="sendContentLLM('policy_validator')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Validate Policy</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt || '';
            document.getElementById('policy').value = data.policy || '';
            document.getElementById('example-policies').value = data.example_policies || '';
        }

        async function extract_policy_schema_handling(){
            const response = await fetch('/database_utilities', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: 'extract_policy_schema'
                })
            });

            const data = await response.json();
            console.log(data);

            document.getElementById('content').style.display = 'block';
            document.getElementById('content').innerHTML = '';
            document.getElementById('content').innerHTML = `
                <h2 id="content-header">Extract Policy Schema</h2>
                <h3 class="content-subheader">Initial Prompt</h3>
                <textarea id="initial-prompt"></textarea>

                <h3 class="content-subheader">Policy</h3>
                <textarea id="policy"></textarea>

                <h3 class="content-subheader">Example Schema</h3>
                <textarea id="example-schema"></textarea>

                <div style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <button id="extract-schema" onclick="sendContentLLM('extract_policy_schema')" style="margin: 1rem; padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Extract Policy Schema</button>
                </div>
            `;

            document.getElementById('initial-prompt').value = data.initial_prompt || '';
            document.getElementById('policy').value = data.policy || '';
            document.getElementById('example-schema').value = data.example_schema || '';
        }


        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers for utility cards
            const cards = document.querySelectorAll('.analytics-card');
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    const utility = this.dataset.utility;
                    if (utility) {
                        console.log(`Clicked on ${utility}`);
                        // Add navigation logic here
                        if (utility === 'policy-creation') {
                            policy_creation_handling();
                        } else if (utility === 'api-implementation') {
                            api_implementation_handling();
                        } else if (utility === 'database-seeding') {
                            database_seeding_handling();
                        } else if (utility === 'scenario-realism') {
                            scenario_realism_handling();
                        }
                        else if (utility === 'extract-policy-apis') {
                            extract_policy_apis_handling();
                        } else if (utility === 'extract-policy-schema') {
                            extract_policy_schema_handling();
                        }
                        else if (utility === 'tune-policy') {
                            tune_policy_handling();
                        } else if (utility === 'policy-validator') {
                            policy_validator_handling();
                        }
                    } else {
                        console.warn('No utility data found for this card.');
                    }
                });
            });
        });
    </script>   
</head>
<body>
    <header class="dashboard-header">
        <a href='/'> <div class="logo">
            <img src="{{ url_for('static', filename='images/turing_logo.svg') }}" alt="turing image" style="width: 100px; scale: 1.5; display: block; margin: 0 auto;">
        </div></a>
    </header>

    <!-- Task Tracker Section -->
    <section class="task-tracker-section">
        <div class="tracker-header">
            <div class="header-visual">
                <div class="database-icon">
                    <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="dbGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        <!-- Database cylinder layers -->
                        <ellipse cx="60" cy="25" rx="35" ry="8" fill="url(#dbGradient)" opacity="0.8" filter="url(#glow)"/>
                        <rect x="25" y="25" width="70" height="15" fill="url(#dbGradient)" opacity="0.6"/>
                        <ellipse cx="60" cy="40" rx="35" ry="8" fill="url(#dbGradient)" opacity="0.9"/>
                        
                        <ellipse cx="60" cy="50" rx="35" ry="8" fill="url(#dbGradient)" opacity="0.7"/>
                        <rect x="25" y="50" width="70" height="15" fill="url(#dbGradient)" opacity="0.5"/>
                        <ellipse cx="60" cy="65" rx="35" ry="8" fill="url(#dbGradient)" opacity="0.8"/>
                        
                        <ellipse cx="60" cy="75" rx="35" ry="8" fill="url(#dbGradient)" opacity="0.6"/>
                        <rect x="25" y="75" width="70" height="15" fill="url(#dbGradient)" opacity="0.4"/>
                        <ellipse cx="60" cy="90" rx="35" ry="8" fill="url(#dbGradient)" opacity="0.9"/>
                        
                        <!-- Connection lines -->
                        <line x1="105" y1="60" x2="115" y2="60" stroke="url(#dbGradient)" stroke-width="2" opacity="0.6"/>
                        <circle cx="118" cy="60" r="2" fill="url(#dbGradient)" opacity="0.8"/>
                    </svg>
                </div>
            </div>
            <h1>Database Domain Utilities</h1>
            <div class="subtitle-container">
                <div class="subtitle-line"></div>
                <span class="subtitle">Database Utilities Tooling</span>
                <div class="subtitle-line"></div>
            </div>
            <p class="tracker-description">
                Streamline your database operations with our comprehensive suite of automation tools. 
                From policy creation to performance monitoring, everything you need to build robust database domains.
            </p>
        </div>

        <!-- Utilities Overview -->
        <div class="analytics-container">
            <div class="analytics-card" data-utility="policy-creation">
                <div class="utility-icon">🛡️</div>
                <div class="utility-title">Policy Creation</div>
                <div class="utility-description">Generate and configure the policies that the agent LLM need to follow and adhere to in order to depict the desired behavior</div>
            </div>
            <div class="analytics-card" data-utility="api-implementation">
                <div class="utility-icon">🔌</div>
                <div class="utility-title">API Implementation</div>
                <div class="utility-description">Create the prompt needed for implementing the APIs within the interface</div>
            </div>
            <div class="analytics-card" data-utility="database-seeding">
                <div class="utility-icon">🌱</div>
                <div class="utility-title">Database Seeding</div>
                <div class="utility-description">Populate databases with initial data, and reference tables</div>
            </div>
            <div class="analytics-card" data-utility="scenario-realism">
                <div class="utility-icon">🕶️</div>
                <div class="utility-title">Scenario Realism</div>
                <div class="utility-description">Check the realism of the scenarios presented</div>
            </div>
            <div class="analytics-card" data-utility="extract-policy-apis">
                <div class="utility-icon">📡</div>
                <div class="utility-title">Extract Policy APIs</div>
                <div class="utility-description">Extract and analyze APIs from existing policies using initial prompts and example API references</div>
            </div>
            <div class="analytics-card" data-utility="extract-policy-schema">
                <div class="utility-icon">📋</div>
                <div class="utility-title">Extract Policy Schema</div>
                <div class="utility-description">Extract database schema information from policies using initial prompts and example schema references</div>
            </div>
            <div class="analytics-card" data-utility="tune-policy">
                <div class="utility-icon">🎛️</div>
                <div class="utility-title">Tune Policy</div>
                <div class="utility-description">Fine-tune and optimize existing policies using reference examples and best practices</div>
            </div>
            <div class="analytics-card" data-utility="policy-validator">
                <div class="utility-icon">✅</div>
                <div class="utility-title">Policy Validator</div>
                <div class="utility-description">Validate policy structure, completeness, and compliance against example policies</div>
            </div>
        </div>

        <div id="content">
        </div>
    </section>
</body>
</html>